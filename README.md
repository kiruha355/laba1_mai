## Лабораторная работа №1.

# Тема: Разработка консольных калькуляторов на Python (вариант M3)

### Работа калькулятора:

Пользователю необходимо ввести выражение в обратной польской нотации,калькулятор последовательно токенизирует,добавляет
в стек и парсит полученные данные.В конце пользователь получает готовый ответ на выражение типа float.

### Возможности калькулятора:

1.Базовые арифметические операции: +, -, *, /

2.Дополнительные операции:

Целочисленное деление: //

Остаток от деления: %

Возведение в степень: **

3.Поддержка унарных знаков ($-"+",~-"-")

4.Поддержка выражений со скобками

### Допущения при вводе:

1.Ввод сколько угодного числа пробелов. Напиример: "3 4 *" или "          3 3 - 4 5 +"

2.Возможность написания унарного плюса перед числом. Может быть как $3,так и 3. $100==100.

3.Возможность использования любого числа скобок. Например: (((((2 2 +)))))

### Структура проекта:
 <pre>

├── .gitignore                 # git ignore файл
├── .pre-commit-config.yaml    # Средства автоматизации проверки кодстайла
├── README.md                  # Документация
├── pyproject.toml             # Зависимости проекта
├── requirements.txt           # Зависимости проекта
├── uv.lock                    # Зависимости проекта
├── src                        # Исходный код
│   ├── __init__.py
│   ├── calculator_error.py    # Ошибки ввода
│   ├── expression_parser.py   # Парсер математических выражений
│   ├── main.py                # Главный файл
│   ├── stack.py               # Стек для вычислений
│   └── tokenizer.py           # Токенизатор входных выражений
└── tests                      # Тесты
    ├── __init__.py
    ├── test_calc.py           # Тесты выражений
    ├── test_errors.py         # Тесты обработки ошибок
    ├── test_stack.py          # Тесты стека
    └── test_tokenizer.py      # Тесты токенизатора
</pre>

### Принцип работы кода:

После ввода выражения пользователем введеная строка проходит токенезацию с помощью регулярных выражений. Входная строка
разбивается на отдельные токены. Она распознает числа и операторы и задает им нужный тип, делая кортеж вида: ("Тип","
Значение").Числам задается значние "NUM",а для каждого отдельного токена вид "None".Также функция отдельно проверяет на
унарные знаки: в случае ввода $ игнорирует знак, а в случае "~" преобразовывает в минус.

Далее токены добавляются в стек.Класс RPNStack делает стек для вычислений по алгоритму обратной польской записи.
Создается словарь операторов с указанием их приоритета вычислений. Функция apply_operator() извлекает два верхних
значения из стека, применяет к ним оператор и помещает результат обратно в стек (игнорирует скобки).Затем функция
do_operation() выполняет математические операции.

Дальше математическое выражение прохлдит Parser. Функция parse() начинает с очистки стека и токенизации входного
выражения.Затем выполняется анализ корректности ввода: проверка скобок, проверка наличия операторов между числами. После
успешной проверки происходит вычисление - токены последовательно обрабатываются: числа помещаются в стек, операторы
применяются к значениям из стека. Финальный результат извлекается из вершины стека.

В конечном итоге примененный алгоритм передается вызваннной функции в main и выдает готовое выражение в случае
корректного ввода, либо же выдает "умную ошибку", которая показывает, какая именно была проблема при вводе.
